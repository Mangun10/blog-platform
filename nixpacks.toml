# Nixpacks configuration for optimized Railway builds

[phases.setup]
nixPkgs = ["jdk17", "maven"]

[phases.build]
cmds = [
  "mvn clean package -DskipTests -B -q",
  "ls -la target/"
]

[start]
cmd = "java -Xms256m -Xmx512m -Djava.security.egd=file:/dev/./urandom -jar target/*.jar"

[variables]
MAVEN_OPTS = "-Xmx1536m"
JAVA_OPTS = "-Xms256m -Xmx512m"